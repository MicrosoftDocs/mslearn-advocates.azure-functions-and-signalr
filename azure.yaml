# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: azure-functions-and-signalr
metadata:
  template: azure-functions-and-signalr@0.0.1-beta

hooks:
  postprovision:
    shell: "sh"
    continueOnError: false
    interactive: true

    # TODO: provide a cross platform way to run this script
    run: ./setup-resources/get-env.sh

services:
  client:
    project: client-end
    dist: dist
    language: ts
    host: staticwebapp
    hooks:
      postpackage:
        shell: sh
        interactive: true
        # Note: the current working directory is ./client-end
        run: ../setup-resources/get-env.sh
  server:
    project: server-end
    language: ts
    host: function
